function chatService(e){var a=firebase.database().ref().child("messages"),t={getMessages:function(){return e(a)},showLimitMessages:function(){return e(a.limitToLast(5))},sendMessage:function(e){this.getMessages().$add(e)}};return t}function enterKey(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.enterKey)}),a.preventDefault())})}}var config={apiKey:"AIzaSyBc7yz4jUSVMN7Lr0lCwZ1bdAeYk-GfrTg",authDomain:"angularchat-7713f.firebaseapp.com",databaseURL:"https://angularchat-7713f.firebaseio.com",storageBucket:"angularchat-7713f.appspot.com",messagingSenderId:"680642183359"};firebase.initializeApp(config),angular.module("afbChat",["firebase"]),angular.module("afbChat").controller("chatCtrl",["ChatService","$firebaseAuth",function(e,a){var t=this,s=a();t.messages=e.getMessages(),t.limitMessages=e.showLimitMessages(),t.sendMessage=function(){if(null!=t.author)var a={authorName:t.author.displayName,authorId:t.author.uid,photo:t.author.photoURL,text:t.newMessage};else alert("No active user!");""!=t.newMessage?(e.sendMessage(a),t.newMessage=""):alert("Enter message")},t.login=function(){s.$signInWithPopup("google")},t.logout=function(){s.$signOut()},s.$onAuthStateChanged(function(e){t.author=e,console.log(e)})}]),angular.module("afbChat").factory("ChatService",["$firebaseArray",chatService]),angular.module("afbChat").directive("enterKey",[enterKey]);